(this["webpackJsonpgame-in-dots-app"]=this["webpackJsonpgame-in-dots-app"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),c=a.n(l),s=(a(14),a(15),a(16),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Game in Dots"))}),o=a(6),i=a.n(o),d=a(1),u=a(2),m=a(4),p=a(3),h=a(5),f=(a(18),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=Array.from({length:this.props.field});return r.a.createElement(n.Fragment,null,r.a.createElement("p",{className:"message hidden"},"!"),r.a.createElement("div",{className:"field-wrapper"},this.props.field&&r.a.createElement("table",{className:"field-table"},r.a.createElement("tbody",null,Array.prototype.map.call(e,(function(t,a){return r.a.createElement("tr",{key:"".concat(a,"tr")},Array.prototype.map.call(e,(function(e,t){return r.a.createElement("td",{key:"".concat(t,"td").concat(a),className:"field-cell field-cell-select"})})))}))))))}}]),t}(n.Component)),y=(a(19),function(e){var t=e.leaders;return r.a.createElement("div",{className:"leaders-wrapper"},r.a.createElement("p",null,"Leader Board"),r.a.createElement("table",{className:"leaders-table-wrapper"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"leader-row-head"},r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Date")),t.map((function(e){var t=e.id,a=e.winner,n=e.date;return r.a.createElement("tr",{key:t,className:"leader-row"},r.a.createElement("td",{className:"leader-name"},a),r.a.createElement("td",{className:"leader-date"},n))})))))}),v=(a(20),function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.drawField},r.a.createElement("select",{name:"gameMode",defaultValue:"DEFAULT"},r.a.createElement("option",{value:"DEFAULT",disabled:!0,hidden:!0},"Pick game mode"),r.a.createElement("option",{value:"Easy"},"Easy"),r.a.createElement("option",{value:"Normal"},"Normal"),r.a.createElement("option",{value:"Hard"},"Hard")),r.a.createElement("input",{type:"text",name:"name",placeholder:"Name",autoComplete:"off",required:!0}),r.a.createElement("button",{className:"play-button"},"PLAY")))}),E="https://starnavi-frontend-test-task.herokuapp.com/game-settings",w=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={field:null,delay:null,name:"",leaders:null},a.drawField=function(e){var t,n,r,l,c,s,o;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return e.preventDefault(),document.querySelector(".field-table")&&a.setState({field:null}),document.querySelector(".message").classList.add("hidden"),t=e.target.elements.gameMode.value,n=e.target.elements.name.value,d.next=9,i.a.awrap(fetch(E));case 9:return r=d.sent,d.next=12,i.a.awrap(r.json());case 12:l=d.sent,"Easy"===t&&a.setState({field:l.easyMode.field,delay:l.easyMode.delay,name:n}),"Normal"===t&&a.setState({field:l.normalMode.field,delay:l.normalMode.delay,name:n}),"Hard"===t&&a.setState({field:l.hardMode.field,delay:l.hardMode.delay,name:n}),c=a.state,s=c.field,o=c.name,s&&o&&a.startGame();case 18:case"end":return d.stop()}}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(e){return e.reverse().slice(0,5)})).then((function(t){return e.updateData(t)})).catch((function(e){return e}))}},{key:"updateData",value:function(e){this.setState({leaders:e})}},{key:"startGame",value:function(){var e=document.querySelector(".message"),t=this.state,a=t.delay,n=t.name,r=document.querySelectorAll(".field-cell-select"),l=this.sendData.bind(this),c=setInterval((function(){var t=document.querySelectorAll(".field-cell-select"),s=t.length,o=t[Math.floor(Math.random()*s)];o.classList.add("blue"),o.classList.remove("field-cell-select"),o.addEventListener("click",(function(e){e.target.classList.add("green"),o.classList.add("player-win"),e.target.classList.remove("blue")})),setTimeout((function(){o.classList.contains("green")||(o.classList.add("red"),o.classList.add("machine-win"),o.classList.remove("blue"),e.classList.contains("hidden")||o.classList.remove("red"))}),a);var i=document.querySelectorAll(".machine-win"),d=document.querySelectorAll(".player-win");2*i.length>r.length&&(e.innerHTML="Computer won",e.classList.remove("hidden"),e.classList.add("computer-won"),o.classList.remove("blue"),clearInterval(c),l("Computer")),2*d.length>r.length&&(e.innerHTML="".concat(n," won"),e.classList.remove("hidden"),e.classList.add("player-won"),o.classList.remove("blue","green"),clearInterval(c),l(n))}),a)}},{key:"sendData",value:function(e){var t=this,a=new Date,n=a.toLocaleString("en",{day:"numeric",month:"long",year:"numeric"}),r=a.toLocaleString().split(",")[1].slice(0,-3);fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({id:Math.random(),winner:e,date:"".concat(r,"; ").concat(n)})}).then((function(e){return e.json()})).then((function(e){return e.reverse().slice(0,5)})).then((function(e){return t.updateData(e)})).catch((function(e){return e})),document.querySelector(".play-button").innerHTML="PLAY AGAIN",this.setState({delay:null,name:""})}},{key:"render",value:function(){return r.a.createElement("section",{className:"game-wrapper"},r.a.createElement("div",{className:"play-wrapper"},r.a.createElement(v,{drawField:this.drawField}),r.a.createElement(f,this.state)),this.state.leaders&&r.a.createElement(y,this.state))}}]),t}(n.Component);var g=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(s,null),r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.17722ae9.chunk.js.map