(this["webpackJsonpgame-in-dots-app"]=this["webpackJsonpgame-in-dots-app"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,l=a(0),r=a.n(l),c=a(3),s=a.n(c),o=(a(14),a(15),a(16),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Game in Dots"))}),i=a(1),d=a.n(i),m=a(4),u=a(5),p=a(7),h=a(6),f=a(8),y=(a(18),function(e){var t=Array.from({length:e.field});return r.a.createElement(l.Fragment,null,r.a.createElement("p",{className:"message hidden"},"!"),r.a.createElement("div",{className:"field-wrapper"},e.field&&r.a.createElement("table",{className:"field-table"},r.a.createElement("tbody",null,Array.prototype.map.call(t,(function(e,a){return r.a.createElement("tr",{key:"".concat(a,"tr")},Array.prototype.map.call(t,(function(e,t){return r.a.createElement("td",{key:"".concat(t,"td").concat(a),className:"field-cell field-cell-select"})})))})))),!e.field&&r.a.createElement("table",{className:"field-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null))))))}),v=(a(19),function(e){var t=e.leaders;return r.a.createElement("div",{className:"leaders-wrapper"},r.a.createElement("p",null,"Leaders Board"),r.a.createElement("table",{className:"leaders-table-wrapper"},r.a.createElement("tbody",null,r.a.createElement("tr",{className:"leader-row-head"},r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Date")),t.map((function(e){var t=e.id,a=e.winner,n=e.date;return r.a.createElement("tr",{key:t,className:"leader-row"},r.a.createElement("td",{className:"leader-name"},a),r.a.createElement("td",{className:"leader-date"},n))})))))}),E=(a(20),function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.drawField,className:"settings-wrapper"},r.a.createElement("select",{name:"gameMode",defaultValue:"DEFAULT"},r.a.createElement("option",{value:"DEFAULT",disabled:!0,hidden:!0,className:"select-mode"},"Pick game mode"),r.a.createElement("option",{value:"Easy"},"Easy"),r.a.createElement("option",{value:"Normal"},"Normal"),r.a.createElement("option",{value:"Hard"},"Hard")),r.a.createElement("input",{type:"text",name:"name",placeholder:"Enter your name",autoComplete:"off",required:!0}),r.a.createElement("button",{className:"play-button"},"PLAY")))}),w="https://starnavi-frontend-test-task.herokuapp.com/game-settings",g=function(e){function t(){var e,a;Object(m.a)(this,t);for(var l=arguments.length,r=new Array(l),c=0;c<l;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={field:null,delay:null,name:"",leaders:null},a.drawField=function(e){var t,l,r,c,s,o,i;return d.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return e.preventDefault(),clearInterval(n),document.querySelector(".field-table")&&a.setState({field:null}),document.querySelector(".message").classList.add("hidden"),t=e.target.elements.gameMode.value,l=e.target.elements.name.value,m.next=10,d.a.awrap(fetch(w));case 10:return r=m.sent,m.next=13,d.a.awrap(r.json());case 13:c=m.sent,"Easy"===t&&a.setState({field:c.easyMode.field,delay:c.easyMode.delay,name:l}),"Normal"===t&&a.setState({field:c.normalMode.field,delay:c.normalMode.delay,name:l}),"Hard"===t&&a.setState({field:c.hardMode.field,delay:c.hardMode.delay,name:l}),s=a.state,o=s.field,i=s.name,o&&i&&a.startGame();case 19:case"end":return m.stop()}}))},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(e){return e.reverse().slice(0,5)})).then((function(t){return e.updateData(t)})).catch((function(e){return e}))}},{key:"updateData",value:function(e){this.setState({leaders:e})}},{key:"startGame",value:function(){var e=document.querySelector(".message"),t=this.state,a=t.delay,l=t.name,r=document.querySelectorAll(".field-cell"),c=this.sendData.bind(this);n=setInterval((function(){var t=document.querySelectorAll(".field-cell-select"),s=t.length,o=t[Math.floor(Math.random()*s)];o&&(o.classList.add("blue"),o.classList.remove("field-cell-select"),o.addEventListener("click",(function(e){e.target.classList.contains("blue")&&(e.target.classList.add("player-win"),e.target.classList.remove("blue"))})));var i=document.querySelectorAll(".player-win"),d=document.querySelectorAll(".machine-win");setTimeout((function(){o&&o.classList.contains("blue")&&(o.classList.add("machine-win"),o.classList.remove("blue"))}),a),o&&2*i.length>r.length&&(e.innerHTML="".concat(l," won"),e.classList.remove("hidden"),o.classList.remove("blue","player-win","machine-win"),clearInterval(n),c(l)),o&&2*(d.length+1)>r.length&&(e.innerHTML="Computer won",e.classList.remove("hidden"),clearInterval(n),o.classList.remove("blue","machine-win"),c("Computer")),!o&&2*(d.length+1)>r.length&&(e.innerHTML="Computer won",e.classList.remove("hidden"),clearInterval(n),c("Computer")),!o&&2*i.length>r.length&&(e.innerHTML="".concat(l," won"),e.classList.remove("hidden"),clearInterval(n),c(l))}),a)}},{key:"sendData",value:function(e){var t=this,a=new Date,n=a.toLocaleString("en",{day:"numeric",month:"long",year:"numeric"}),l=a.toLocaleString().split(",")[1].slice(0,-3);fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({id:Math.random(),winner:e,date:"".concat(l,"; ").concat(n)})}).then((function(e){return e.json()})).then((function(e){return e.reverse().slice(0,5)})).then((function(e){return t.updateData(e)})).catch((function(e){return e})),document.querySelector(".play-button").innerHTML="PLAY AGAIN",this.setState({delay:null,name:""})}},{key:"render",value:function(){return r.a.createElement("section",{className:"game-wrapper"},r.a.createElement("div",{className:"play-wrapper"},r.a.createElement(E,{drawField:this.drawField}),r.a.createElement(y,this.state)),this.state.leaders&&r.a.createElement(v,this.state))}}]),t}(l.Component);var b=function(){return r.a.createElement(l.Fragment,null,r.a.createElement(o,null),r.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.59573a97.chunk.js.map